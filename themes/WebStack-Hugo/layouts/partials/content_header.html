<div class="main-content flex-fill grid-bg">
    <div class="big-header-banner">
        <div id="header" class="page-header sticky">
            <div class="navbar navbar-expand-md">
                <div class="container-fluid p-0">

                    <a href="" class="navbar-brand d-md-none" title="{{ .Site.Title }}">
                        <img src="{{ relURL $.Site.Params.images.logoCollapseLight }}" class="logo-light"
                            alt="{{ .Site.Title }}">
                        <img src="{{ relURL $.Site.Params.images.logoCollapseDark }}" class="logo-dark d-none"
                            alt="{{ .Site.Title }}">
                    </a>

                    <div class="collapse navbar-collapse order-2 order-md-1">
                        <div class="header-mini-btn">
                            <label>
                                <input id="mini-button" type="checkbox">
                                <svg viewbox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                                    <path class="line--1" d="M0 40h62c18 0 18-20-17 5L31 55"></path>
                                    <path class="line--2" d="M0 50h80"></path>
                                    <path class="line--3" d="M0 60h62c18 0 18 20-17-5L31 45"></path>
                                </svg>
                            </label>
                        </div>

                        <ul class="navbar-nav site-menu" style="margin-right: 16px;">
                        {{ range .Site.Data.headers }}
			<li {{ if .list }}class="menu-item-has-children"{{ end }}>
				<a href="{{ .link }}">
                                    <i class="{{ .icon }} fa-lg mr-2"></i>
                                    <span>{{ .item }}</span>
                                </a>
				<ul class="sub-menu">
				{{ range .list }}
				    <li><a href="{{ .url }}">{{ .name }}</a></li>
				{{ end }}
				</ul>
			    </li>
			{{ end }}
			</ul>
                    </div>

                    <!-- 头部中央时间显示 -->
                    <div class="navbar-center-time order-1 order-md-2">
                        <div id="central-time-clock" class="central-time-display">
                            <div class="time-wrapper">
                                <div id="central-current-time" class="central-current-time">00:00:00</div>
                                <div id="central-current-date" class="central-current-date">加载中...</div>
                            </div>
                        </div>
                    </div>

                        {{ if not (eq $.Site.Params.qweather.key "") }}
                        <div class="rounded-circle weather">
                            <div id="he-plugin-simple" style="display: contents;"></div>
                            <script>WIDGET = {
                                    CONFIG: {
                                        "modules": "01234",
                                        "background": 5,
                                        "tmpColor": "E4C600",
                                        "tmpSize": 14,
                                        "cityColor": "E4C600",
                                        "citySize": 14,
                                        "aqiColor": "#E4C600",
                                        "aqiSize": 14,
                                        "weatherIconSize": 24,
                                        "alertIconSize": 18,
                                        "padding": "10px 10px 10px 10px",
                                        "shadow": "1",
                                        "language": "auto",
                                        "borderRadius": 5,
                                        "fixed": "false",
                                        "vertical": "middle",
                                        "horizontal": "left",
                                        "key": "{{ $.Site.Params.qweather.key }}"
                                    }
                                }
                            </script>
                            <script src="https://widget.qweather.net/simple/static/js/he-simple-common.js?v=2.0"></script>
                        </div>
                        {{ end }}
                    </div>

                    <ul class="nav navbar-menu text-xs order-1 order-md-3">
                        <!--li class="nav-search ml-3 ml-md-4">
                            <a href="javascript:" data-toggle="modal" data-target="#search-modal"><i
                                    class="iconfont icon-search icon-2x"></i></a>
                        </li-->
                        <li class="nav-item d-md-none mobile-menu ml-3 ml-md-4">
                            <a href="javascript:" id="sidebar-switch" data-toggle="modal"
                                data-target="#sidebar"><i class="iconfont icon-classification icon-2x"></i></a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
        <div class="placeholder" style="height:74px"></div>
    </div>

    <!-- 中央时间显示的JavaScript -->
    <script>
        function updateCentralTime() {
            // 使用世界时间API获取准确时间
            fetch('https://worldtimeapi.org/api/timezone/Asia/Shanghai')
                .then(response => response.json())
                .then(data => {
                    const datetime = new Date(data.datetime);
                    updateCentralDisplay(datetime);
                })
                .catch(() => {
                    // 如果API失败，使用本地时间
                    const now = new Date();
                    updateCentralDisplay(now);
                });
        }
        
        function updateCentralDisplay(datetime) {
            const timeElement = document.getElementById('central-current-time');
            const dateElement = document.getElementById('central-current-date');
            
            // 格式化时间 (HH:MM:SS) 带动画效果
            const timeString = datetime.toLocaleTimeString('zh-CN', {
                hour12: false,
                hour: '2-digit',
                minute: '2-digit',
                second: '2-digit'
            });
            
            // 格式化日期
            const dateString = datetime.toLocaleDateString('zh-CN', {
                year: 'numeric',
                month: '2-digit',
                day: '2-digit',
                weekday: 'short'
            });
            
            if (timeElement) {
                // 添加闪烁效果
                if (timeElement.textContent !== timeString) {
                    timeElement.style.transform = 'scale(1.05)';
                    setTimeout(() => {
                        timeElement.style.transform = 'scale(1)';
                    }, 100);
                }
                timeElement.textContent = timeString;
            }
            if (dateElement) dateElement.textContent = dateString;
        }
        
        // 页面加载完成后开始更新时间
        document.addEventListener('DOMContentLoaded', function() {
            updateCentralTime();
            
            // 每秒更新显示
            setInterval(() => {
                const now = new Date();
                updateCentralDisplay(now);
            }, 1000);
            
            // 每分钟同步一次准确时间
            setInterval(updateCentralTime, 60000);
        });
    </script>
